<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE Profile [
  <!ENTITY ZoneId "1070">
  <!ENTITY DutyId "869">
  
  <!ENTITY Shortcut "2000700">
  
  <!ENTITY SubZoneName "1">
  
  <!ENTITY Boss1 "1">
  <!ENTITY Boss2 "2">
  <!ENTITY Boss3 "3">
]>
<Profile>
  <Name>[O][RBTrust] 90.3: The Fell Court of Troia</Name>
  <Order>
    <CheckPlugins/>

    <While Condition="True">
      <If Condition="not IsOnMap(&ZoneId;)">
        <EquipRecommended/>
        <JoinSupportDuty DutyId="&DutyId;"/>
      </If>

      <If Condition="IsOnMap(&ZoneId;)">
        <WaitForLoading/>
        <SetPlugins PluginNames="SideStep,回避" IsEnabled="true"/>

        <If Condition="ObjectExistsWithId(&Shortcut;) and GameObjectManager.GetObjectByNPCId(&Shortcut;).IsTargetable">
          <!-- Shortcut available -->
          <UseTransport NpcId="&Shortcut;" XYZ="0, 0, 0"/>
        </If>

        <If Condition="WorldManager.SubZoneId in [&SubZoneName;,]">
          <MoveTo XYZ="0, 0, 0"/>
        </If>

        <If Condition="WorldManager.SubZoneId in [&SubZoneName;,]">
          <NoCombatMoveTo XYZ="0, 0, 0" Wait="0"/>
          <Grind GrindRef="boss1" PostCombatDelay="2.0" While="GameObjectManager.GetObjectByNPCId(&Boss1;)"/>
          <LootTreasure/>

          <RunCode name="Boss2Transition"/>
          <WaitForLoading/>

          <LeaveDuty/>
        </If>
      </If>
    </While>
  </Order>
  <CodeChunks>
    <CodeChunk Name="Boss2Transition">
      <![CDATA[
        Core.Player.SetFacing(3.1479f);
        MovementManager.MoveForwardStart();
        while (WorldManager.SubZoneId != 2962)  {  await Coroutine.Yield();  }
        Navigator.PlayerMover.MoveStop();
      ]]>
    </CodeChunk>
  </CodeChunks>
  <GrindAreas>
    <GrindArea name="Boss1">
      <Hotspots>
        <Hotspot Radius="200" XYZ="0, 0, 0"/>
      </Hotspots>
      <TargetMobs>
        <TargetMob Name="Boss 1" Id="&Boss1;" Weight="1"/>
      </TargetMobs>
    </GrindArea>
    <GrindArea name="Boss2">
      <Hotspots>
        <Hotspot Radius="200" XYZ="0, 0, 0"/>
      </Hotspots>
      <TargetMobs>
        <TargetMob Name="Boss 2" Id="&Boss2;" Weight="1"/>
      </TargetMobs>
    </GrindArea>
    <GrindArea name="Boss3">
      <Hotspots>
        <Hotspot Radius="200" XYZ="0, 0, 0"/>
      </Hotspots>
      <TargetMobs>
        <TargetMob Name="Boss 3" Id="&Boss3;" Weight="1"/>
      </TargetMobs>
    </GrindArea>
  </GrindAreas>
</Profile>
